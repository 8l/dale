(import macros)

(using-namespace std.macros
(def my-must-init
  (macro intern (T)
    (if (must-init T)
        (qq printf "must initialise\n")
        (qq printf "not necessary to initialise\n"))))
)
(def mys
  (struct (attr must-init) intern ((a int) (b int))))

(def main
  (fn extern-c int (void)
    (my-must-init (const int))
    (my-must-init int)
    (my-must-init mys)
    (my-must-init (p mys))
    (my-must-init (const mys))
    (my-must-init (const (p mys)))
    0))
